<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title>Email Categorization</title>
</head>
<body>

<nav class="navbar">
    <a href="/emails">Summarization</a>
    <a href="/categorize">Categorization</a>
    <a href="/sentiment">Sentiment</a>
</nav>

<div class="container">
    <h1>Email Categorization</h1>

    <!-- ===============================
         STEP 1: CATEGORY INPUT
    =============================== -->
    {% if not ask_examples %}
    <form method="POST">
        <label><strong>Enter categories (comma separated):</strong></label><br><br>
        <input type="text" name="categories" placeholder="Promotions, Updates, Exams" required>
        <br><br>
        <button type="submit">Continue</button>
    </form>
    {% endif %}

    <!-- ===============================
         STEP 2: UNKNOWN CATEGORY EXAMPLES
    =============================== -->
    {% if ask_examples %}
    <form method="POST">
        <input type="hidden" name="categories" value="{{ categories }}">

        <h3>Provide examples for unknown categories</h3>

        {% for cat in unknown_categories %}
            <label><strong>{{ cat }}</strong></label><br>
            <textarea
                name="examples_{{ cat }}"
                rows="3"
                placeholder="Enter sample emails separated by ||"
                required></textarea>
            <br><br>
        {% endfor %}

        <button type="submit">Categorize Emails</button>
    </form>
    {% endif %}

    <!-- ===============================
         RESULTS
    =============================== -->
    {% if results %}
        <h2>Predicted Categories</h2>

        {% for email in results %}
            <div class="email-card">
                <h3>{{ email.Subject or "No Subject" }}</h3>
                <p><strong>Category:</strong> {{ email.Predicted_Category }}</p>
                <p><strong>Score:</strong> {{ email.Category_Score }}</p>
                <p>{{ email.Body }}</p>
            </div>
        {% endfor %}
    {% endif %}

</div>

</body>
</html>
